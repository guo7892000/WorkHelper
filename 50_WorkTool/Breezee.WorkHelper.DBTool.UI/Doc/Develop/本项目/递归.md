## 本项目-递归

### 获取文件递归
```
// 获取目录文件方法
private async void GetDirectoryFile(DirectoryInfo rootDirectory, string[] sExcludeFullDir, string sCodePath, string[] sExcludeFullFile)
{
    //文件处理
    foreach (FileInfo file in rootDirectory.GetFiles()) 
    {
        getChangCodeFileList(file, sCodePath, sExcludeFullFile);
    }
    //普通目录的处理
    foreach (DirectoryInfo path in rootDirectory.GetDirectories())
    {
        if (path.Name.StartsWith("."))
        {
            continue; //跳过点开头的系统目录
        }
        bool isSkip = false;
        foreach(string sRelDir in sExcludeFullDir)
        {
            if(path.FullName.StartsWith(Path.Combine(sCodePath, sRelDir.Trim().Trim('\\'))))
            {
                isSkip = true;
                break;
            }
        }
        //跳过忽略的文件名、绝对路径文件名
        if (isSkip)
        {
            continue;
        }
        // 递归查询其下目录
        GetDirectoryFile(path, sExcludeFullDir, sCodePath, sExcludeFullFile);
    }
}

// 获取代码变化的列表
private void getChangCodeFileList(FileInfo file, string sCodePath, string[] sExcludeFullFile)
{
    if (file.Attributes == FileAttributes.System || file.Attributes == FileAttributes.Temporary || file.Attributes == FileAttributes.Hidden)
    {
        return; //跳过系统文件
    }
    if (file.LastWriteTime < dtpBegin.Value || file.LastWriteTime > dtpEnd.Value)
    {
        return;  //不在修改时间范围内的文件跳过
    }
    if (file.Name.startsWith("."))
    {
        return;  //跳过.开头的文件
    }
    bool isSkip = false;
    foreach (string sRelDir in sExcludeFullFile)
    {
        if (file.FullName.Equals(Path.Combine(sCodePath, sRelDir.Trim().Trim('\\')),StringComparison.OrdinalIgnoreCase))
        {
            isSkip = true;
            break;
        }
    }
    //跳过忽略的文件名、绝对路径文件名
    if (isSkip)
    {
        return;
    }
    //文件加入到网格中
    DataTable dtInput = dgvInput.GetBindingTable();
    DataRow drNew = dtInput.NewRow();
    drNew["file"] = file.FullName.Replace(sCodePath,"").Trim('\\');
    drNew["ROWNO"] = dtInput.Rows.Count + 1;
    dtInput.Rows.Add(drNew);
}
```
