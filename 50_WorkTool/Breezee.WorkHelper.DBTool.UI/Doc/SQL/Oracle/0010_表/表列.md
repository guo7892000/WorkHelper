## 表列
### 查询所有表
```
SELECT A.OWNER AS TABLE_SCHEMA, A.TABLE_NAME,B.COMMENTS AS TABLE_COMMENT,A.TABLESPACE_NAME,'0' AS TABLE_IS_VIEW
FROM ALL_TABLES A
LEFT JOIN ALL_TAB_COMMENTS B
    ON A.TABLE_NAME = B.TABLE_NAME AND A.OWNER=B.OWNER
WHERE 1=1
AND A.TABLE_NAME = '#TABLE_NAME#'
AND A.OWNER = '#TABLE_SCHEMA#'
UNION ALL
SELECT A.OWNER AS TABLE_SCHEMA, A.OBJECT_NAME AS TABLE_NAME,'' AS TABLE_COMMENT,'' AS TABLESPACE_NAME,'1' AS TABLE_IS_VIEW
FROM ALL_OBJECTS A
WHERE 1=1
    AND A.OBJECT_TYPE = 'VIEW'
    AND A.OWNER = '#TABLE_SCHEMA#'
    AND A.OBJECT_NAME = '#TABLE_NAME#'

```
### 查询表所有列
```
SELECT A.OWNER AS TABLE_SCHEMA,
    NVL(A.TABLE_NAME,V.OBJECT_NAME) AS TABLE_NAME,
    A.COLUMN_ID AS ORDINAL_POSITION,
    A.COLUMN_NAME,
    B.COMMENTS AS COLUMN_COMMENT,
    A.DATA_TYPE,
    A.DATA_LENGTH AS CHARACTER_MAXIMUM_LENGTH,
    A.DATA_PRECISION AS NUMERIC_PRECISION,
    A.DATA_SCALE AS NUMERIC_SCALE,
    A.NULLABLE AS IS_NULLABLE,
    '' AS COLUMN_DEFAULT,
    DECODE(PK.COLUMN_NAME,NULL,0,1)  AS COLUMN_KEY,
    C.COMMENTS AS TABLE_COMMENT,
    A.OWNER AS TABLE_OWNER
FROM ALL_TAB_COLS A
LEFT JOIN ALL_COL_COMMENTS B 
    ON A.TABLE_NAME=B.TABLE_NAME AND A.COLUMN_NAME=B.COLUMN_NAME AND A.OWNER=B.OWNER
LEFT JOIN ALL_TABLES T
    ON A.TABLE_NAME = T.TABLE_NAME AND A.OWNER=T.OWNER  
LEFT JOIN ALL_OBJECTS V
    ON V.OBJECT_TYPE = 'VIEW' AND V.OWNER = A.OWNER AND V.OBJECT_NAME = A.TABLE_NAME
LEFT JOIN ALL_TAB_COMMENTS C
    ON A.TABLE_NAME = C.TABLE_NAME AND A.OWNER = C.OWNER
LEFT JOIN (
    SELECT AA.OWNER,AA.TABLE_NAME,BB.COLUMN_NAME 
    FROM ALL_CONSTRAINTS AA
    LEFT JOIN ALL_CONS_COLUMNS BB ON AA.CONSTRAINT_NAME=BB.CONSTRAINT_NAME AND AA.OWNER=BB.OWNER
    WHERE AA.CONSTRAINT_TYPE='P' 
    ) PK ON PK.TABLE_NAME = A.TABLE_NAME AND PK.COLUMN_NAME = A.COLUMN_NAME AND PK.OWNER=A.OWNER    
WHERE 1=1
    AND A.TABLE_NAME IN (#TABLE_NAME_LIST:LS#)
    AND A.TABLE_NAME = '#TABLE_NAME#'
    AND A.OWNER = '#TABLE_SCHEMA#'
ORDER BY A.TABLE_NAME,A.COLUMN_ID
```
### 查询符合LY数据库变更模板的查询SQL：
方便复制用于生成增加字段的LY导入模板变更。
```
SELECT A.COLUMN_ID as 序号, 
   B.COMMENTS AS 列名称,
   A.COLUMN_NAME 列编码,
   DECODE(A.DATA_PRECISION,null,DECODE(A.DATA_LENGTH,null,A.DATA_TYPE,A.DATA_TYPE||'('||A.DATA_LENGTH||')'),A.DATA_TYPE||'('||A.DATA_PRECISION||','||A.DATA_SCALE ||')') AS 类型,
   DECODE(A.DATA_PRECISION,null,DECODE(A.DATA_LENGTH,null,A.DATA_TYPE,A.DATA_LENGTH),A.DATA_PRECISION||','||A.DATA_SCALE) as 列长度,
   DECODE(PK.COLUMN_NAME,NULL,'','PK')  AS 键,
   decode(A.NULLABLE,'N','是','') AS 是否必填,
   '' AS 默认值,
   '' AS 列备注,
   '新增' AS 变更类型
FROM ALL_TAB_COLS A
LEFT JOIN ALL_COL_COMMENTS B
   ON A.TABLE_NAME=B.TABLE_NAME AND A.COLUMN_NAME=B.COLUMN_NAME AND A.OWNER=B.OWNER
LEFT JOIN ALL_TABLES T
   ON A.TABLE_NAME = T.TABLE_NAME AND A.OWNER=T.OWNER  
LEFT JOIN ALL_OBJECTS V
   ON V.OBJECT_TYPE = 'VIEW' AND V.OWNER = A.OWNER AND V.OBJECT_NAME = A.TABLE_NAME
LEFT JOIN ALL_TAB_COMMENTS C
   ON A.TABLE_NAME = C.TABLE_NAME AND A.OWNER = C.OWNER
LEFT JOIN (
   SELECT AA.OWNER,AA.TABLE_NAME,BB.COLUMN_NAME
   FROM ALL_CONSTRAINTS AA
   LEFT JOIN ALL_CONS_COLUMNS BB ON AA.CONSTRAINT_NAME=BB.CONSTRAINT_NAME AND AA.OWNER=BB.OWNER
   WHERE AA.CONSTRAINT_TYPE='P'
   ) PK ON PK.TABLE_NAME = A.TABLE_NAME AND PK.COLUMN_NAME = A.COLUMN_NAME AND PK.OWNER=A.OWNER    
WHERE A.COLUMN_ID > 0
  and A.TABLE_NAME='MBOM_T_MFGSTRU'
  -- AND A.COLUMN_NAME in ('ITEM_PID','ITEM_ID')
  -- AND A.OWNER = 'JFBOMIF'
ORDER BY A.TABLE_NAME,A.COLUMN_ID
```
