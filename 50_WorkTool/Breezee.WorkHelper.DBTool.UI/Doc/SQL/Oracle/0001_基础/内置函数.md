## Oracle-内置函数
### 正则匹配
```
/*返回包含数值或字母的结果*/
select * from v where regexp_like(data, '[0-9A-Za-z]');
/*返回包含非数值和字母得的结果*/
select * from v where regexp_like(data, '[^0-9A-Za-z]');
/*返回以数值或字母开头的结果*/
select * from v where regexp_like(data, '^[0-9A-Za-z]');
/*返回以数值或字母结尾的结果*/
select * from v where regexp_like(data, '[0-9A-Za-z]$');
/*返回只包含数值和字母的结果*/
select * from v where regexp_like(data, '^[0-9A-Za-z]+$');
```
### 包含字符
```
SELECT * FROM employees WHERE name LIKE '%John%';
SELECT * FROM employees WHERE INSTR(name, 'John') > 0;
SELECT * FROM employees WHERE REGEXP_LIKE(name, 'John|Doe');
```
### 列转行函数 Listagg()
```
with temp as(  
select 'China' nation ,'Guangzhou' city from dual union all  
select 'China' nation ,'Shanghai' city from dual union all  
select 'China' nation ,'Beijing' city from dual union all  
select 'USA' nation ,'New York' city from dual union all  
select 'USA' nation ,'Bostom' city from dual union all  
select 'Japan' nation ,'Tokyo' city from dual   
)  
select nation,listagg(city,',') within GROUP (order by city)  as Cities
from temp  
group by nation;

with temp as(  
select 500 population, 'China' nation ,'Guangzhou' city from dual union all  
select 1500 population, 'China' nation ,'Shanghai' city from dual union all  
select 500 population, 'China' nation ,'Beijing' city from dual union all  
select 1000 population, 'USA' nation ,'New York' city from dual union all  
select 500 population, 'USA' nation ,'Bostom' city from dual union all  
select 500 population, 'Japan' nation ,'Tokyo' city from dual   
)  
select population,  
nation,  
city,  
listagg(city,',') within GROUP (order by city) over (partition by nation) rank  
from temp;
```