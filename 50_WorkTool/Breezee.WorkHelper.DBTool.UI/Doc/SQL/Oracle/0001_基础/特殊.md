## Oracle-特殊
### 生成新流水号
SELECT lpad(TO_NUMBER('003') + 1,3,'0') FROM dual;  
### 关联数组（字典或哈希表）
```
-- 使用关联数组：这种方法在PL/SQL中非常常见，因为它提供了类似于其他编程语言中字典或哈希表的功能。
DECLARE
 TYPE my_indexed_table_type IS TABLE OF VARCHAR2(4000) INDEX BY VARCHAR2(32);
 my_table my_indexed_table_type;
BEGIN
 my_table('key1') := 'Value 1';
 my_table('key2') := 'Value 2';
 -- 使用其他键值对
 DBMS_OUTPUT.PUT_LINE(my_table('key1'));  -- 输出: Value 1
END;
```
### 批量检索数据到数组
```
/*PL/SQL中用于批量检索数据到数组的语法，适用于SELECT INTO、FETCH INTO和RETURNING INTO语句。其基本语法为：
SELECT 列名1,列名2 BULK COLLECT INTO 数组变量 FROM 表名*/
-- 定义
var_check_type sys.odcivarchar2list; 
-- 得到数组
Select t.value_code_
Bulk Collect
Into var_check_type
From t_base_lookup_value_ t
Where t.type_code = 'dt_Maturity'
Order By t.sort_id_;
-- 使用
f_indexof(var_check_type, 'QZ')
-- 方法
Function f_indexof(i_arr In sys.odcivarchar2list, i_val In Varchar2) Return Integer Is      
   i Integer;      
 Begin      
   i := i_arr.first;      
   While i Is Not Null Loop              
     If i_arr(i) = i_val Then      
       Return i;      
     End If;      
     
     i := i_arr.next(i);      
   End Loop;      
   Return nvl(i, -1);      
 End f_indexof; 
```
### listagg函数属于聚合函数的一种，它能把分组内的多个值按照指定顺序拼接成一个字符串
```
SELECT column1,
      LISTAGG(column2, ', ') WITHIN GROUP (ORDER BY column2) AS combined_column
FROM your_table
GROUP BY column1;
```
### 字段定义类型
```
 Type Rec_FieldDef_Type Is Record(
   COLUMN_SEQ     Varchar2(20), --顺序号，例：01
   COLUMN_ID      Varchar2(32), --ID（一般等于字段名）
   COLUMN_NAME    Varchar2(30), --名称，例：USER_ID
   COLUMN_DISPLAY Varchar2(200), --显示名称，例：用户
   COLUMN_WIDTH   Number(20) --长度，例：20
   );
 Type Table_FieldDef_Type Is Table Of Rec_FieldDef_Type;


```
### 正则查询
```
AND regexp_like(A.ITEM_ID,#{itemId,jdbcType=VARCHAR},'i')
AND regexp_like(A.ITEM_NAME,'组块|总成','i')
```