## JSP-基础
### ModelMap：org.springframework.ui.ModelMap
Spring框架自动创建ModelMap的实例，并作为Controller方法的参数传入，用户无需自己创建对象。ModelMap主要用于把controller方法处理的数据传递到jsp界面，
把需要传输的数据放到ModelMap对象中即可。通过addAttribute()方法传递参数。ModelMap本身不能设置页面的跳转，可以通过Controller方法的返回值来指定跳转的页面。
跟Model用法差不多。返回值设置跳转的页面
### HttpServletRequest
HttpServletRequest的getParameterMap()方法返回一个只读的Map对象，包含所有请求参数（键为参数名，值为参数值的数组）。该方法适用于GET和POST请求，
但需满足特定条件（如Content-Type为application/x-www-form-urlencoded）才能正确获取参数。
【核心功能】返回类型：Map<String, String[]>，键为参数名，值为参数值数组（支持多值参数）。只读限制：返回的Map不可修改，否则会抛出异常。  
【使用场景】获取所有请求参数：  
```
Map<String, String[]> paramMap = request.getParameterMap();
for (Map.Entry<String, String[]> entry : paramMap.entrySet()) {
      System.out.println("参数名: " + entry.getKey() + ", 参数值: " + Arrays.toString(entry.getValue()));
}
```
### 页面跳转
```
@RequestMapping(value = "/testPage")			
public String toFileHistory(HttpServletRequest request, ModelMap modelMap) {			
    modelMap.put("testData", "data1");			//前端可以直接取出testData值
    return "page/test/data/testPage";			
}			

```

### SQL中TIMESTARMP列类型的，要转换为字符，才能序列化返回					
现象：查询正常，调试到返回ResultVO<Map>也正常，到后面序列化的方法就报错了				
原查询：	T.TIMESTAMP_ISSUE			
修改为	to_char(T.TIMESTAMP_ISSUE,'yyyy-MM-dd HH24:mi:ss.ff3') as TIMESTAMP_ISSUE,			

### 多下拉框想隐藏其中一个，发现无效：最终发现要向上找两层到div隐藏才行。							
$("#CNC_NEW_TYPE_L").hide();						//无效
$("#CNC_NEW_TYPE_L").parent().parent().hide();		//正确，这个要在网页中找到其父级元素有几层。

### 修改TD格子内的内容：		
	document.getElementById("PROP_FLAG_TEXT").innerText=tipName;	
### URL包括#号在跳转连接时零件号被截断问题
#在URL中是有特殊含义的，如果传参的值中包括#号，那么要将其转码才行，示例：  
【前端代码】：两次encodeURIComponent    
```
let urlAddr = "testquery/test_main_jump.action?cncCode="				
    +encodeURIComponent(encodeURIComponent(cncCode,"utf-8"),"utf-8")				
    +"&itemId="+encodeURIComponent(encodeURIComponent(itemId,"utf-8"),"utf-8")				
    +"&mfgCenterCode="+encodeURIComponent(encodeURIComponent(mfgCenterCode,"utf-8"),"utf-8")				
    +"&t="+new Date().getTime();				
```
【后端代码】： 两次URLDecoder.decode   
```
@RequestMapping(value = "/test_main_jump")										
public String jumpIndex(HttpServletRequest request, ModelMap modelMap,										
                    @RequestParam(value = "cncCode", required = false) String cncCode,										
                    @RequestParam(value = "itemId", required = false) String itemId,										
                    @RequestParam(value = "mfgCenterCode", required = false) String mfgCenterCode){										
    iResourceRefService.curResourcRefinfo("dt_routedef", request, modelMap);										
    String sCncCode="";										
    String sItemId="";										
    String sMfgCenterCode="";										
    try{										
        sCncCode = URLDecoder.decode(cncCode, "UTF-8");										//每个参数都要调用两次解码
        sCncCode = URLDecoder.decode(sCncCode, "UTF-8");										
        sItemId = URLDecoder.decode(itemId, "UTF-8");										
        sItemId = URLDecoder.decode(sItemId, "UTF-8");										
        sMfgCenterCode = URLDecoder.decode(mfgCenterCode, "UTF-8");										
        sMfgCenterCode = URLDecoder.decode(sMfgCenterCode, "UTF-8");										
    } catch (Exception e) {										
        e.printStackTrace();										
    }										
    //获取跳转过来的参数										
    if(sCncCode != null){										
        modelMap.put("jumpCncCode", sCncCode);										//参数回传给前端
    }										
    if(sItemId != null){										
        modelMap.put("jumpItemId", sItemId);										
    }										
    if(sMfgCenterCode != null){										
        modelMap.put("defaultMfgCenter", sMfgCenterCode);										
    }										
    return "page/test/testData/test_main";										
}	
```

